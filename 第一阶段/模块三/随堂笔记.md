​                                                             SpringMVC高级框架



第一部分：Spring mvc应用

1.1 mvc体系结构

mvc是变现层的设计模型，和其他层没有关系

mvc是一种设计创建web应用程序的模式，分为model、view和controller

1.2Spring MVC是什么?

是一种基于java实现的MVC设计模型的请求驱动类型的轻量级Web框架，是为了解决表现层问题的web框架，他们基于mvc设计模式的，这些表现层框架的主要职责就是处理http请求

2.1 Spring MVC的工作流程

A，开发流程

1）配置DispatcherServlet前端控制器
2）开发处理具体业务逻辑的Handler（@Controller、@Re
3）xml配置⽂件配置controller扫描，配置springmvc的三大件
4）将xml⽂件路径告诉springmvc（DispatcherServlet）

B 请求工作流程

第一步：⽤户发送请求⾄前端控制器DispatcherServlet
第二步：DispatcherServlet收到请求调⽤HandlerMapping处理器映射器
第三步：处理器映射器根据请求Url找到具体的Handler（后端控制器），生成处理器对象及处理器拦截
器(如果 有则⽣成)⼀并返回DispatcherServlet
第四步：DispatcherServlet调⽤HandlerAdapter处理器适配器去调⽤Handler
第五步：处理器适配器执⾏Handler
第六步：Handler执⾏完成给处理器适配器返回ModelAndView
第七步：处理器适配器向前端控制器返回 ModelAndView，ModelAndView 是SpringMVC 框架的一个底层对 象，包括 Model 和 View

第八步：前端控制器请求视图解析器去进⾏视图解析，根据逻辑视图名来解析真正的视图。
第九步：视图解析器向前端控制器返回View
第十步：前端控制器进⾏视图渲染，就是将模型数据（在 ModelAndView 对象中）填充到 request 域
第十一步：前端控制器向⽤户响应结果



2.2 Spring MVC 九大组件

HandlerMapping（处理器映射器）
HandlerMapping 是⽤来查找 Handler 的，也就是处理器，具体的表现形式可以是类，也可以是方法。比如，标注了@RequestMapping的每个⽅法都可以看成是⼀个Handler。Handler负责具体实际的请求处理，在请求到达后，HandlerMapping 的作⽤便是找到请求相应的处理器Handler 和 Interceptor.

HandlerAdapter 

HandlerAdapter 是一个适配器。因为 Spring MVC 中 Handler 可以是任意形式的，只要能处理请
求即可。但是把请求交给 Servlet 的时候，由于 Servlet 的⽅法结构都是doService(HttpServletRequest req,HttpServletResponse resp)形式的，要让固定的 Servlet 处理方法调用 Handler 来进⾏处理，便是 HandlerAdapter 的职责。

ViewResolver
ViewResolver即视图解析器，⽤于将String类型的视图名和Locale解析为View类型的视图，只有⼀
个resolveViewName()方法。从⽅法的定义可以看出，Controller层返回的String类型视图名
viewName 最终会在这⾥被解析成为View。View是是来渲染试图的，也就是说，它会将程序返回
的参数和数据填⼊模板中，⽣成html⽂件。ViewResolver 在这个过程主要完成两件事情：
ViewResolver 找到渲染所⽤的模板（第⼀件⼤事）和所⽤的技术（第⼆件⼤事，其实也就是找到
视图的类型，如JSP）并填⼊参数。默认情况下，Spring MVC会自动为我们配置个
InternalResourceViewResolver,是针对 JSP 类型视图的。

LocaleResolver
ViewResolver 组件的 resolveViewName 方法需要两个参数，一个是视图名，一个是 Locale。
LocaleResolver ⽤于从请求中解析出 Locale，⽐如中国 Locale 是 zh-CN，用来表示一个区域。这
个组件也是 i18n 的基础。

MultipartResolver
MultipartResolver 用于上传请求，通过将普通的请求包装成 MultipartHttpServletRequest 来实现。MultipartHttpServletRequest 可以通过 getFile() ⽅法 直接获得⽂件。如果上传多个组件，还可以调用 getFileMap()方法得到Map<FileName，File>这样的结构，MultipartResolver 的作用就是封装普通的请求，使其拥有⽂件上传的功能。

第 3 节 请求参数绑定

绑定简单类型参数
简单数据类型：⼋种基本数据类型及其包装类型
参数类型推荐使⽤包装数据类型，因为基础数据类型不可以为null
整型：Integer、int
字符串：String
单精度：Float、ﬂoat
双精度：Double、double
布尔型：Boolean、boolean
说明：对于布尔类型的参数，请求的参数值为true或false。或者1或0
注意：绑定简单数据类型参数，只需要直接声明形参即可（形参参数名和传递的参数名要保持⼀
致，建议 使用包装类型，当形参参数名和传递参数名不⼀致时可以使用@RequestParam注解进行
自动映射）

第 4 节 对 Restful 风格请求支持

Restful 是一种 web 软件架构⻛格，它不是标准也不是协议，它倡导的是一个资源定位及资源操作的风格

RESTful 风格 URL：互联网所有的事物都是资源，要求URL中只有表示资源的名称，没有动词。
RESTful风格资源操作：使用HTTP请求中的method⽅法put、delete、post、get来操作资源。分别对
应添加、删除、修改、查询。不过一般使用时还是 post 和 get。put 和 delete在乎不使用。
RESTful 风格资源表述：可以根据需求对URL定位的资源返回不同的表述（也就是返回数据类型，⽐如
XML、JSON等数据格式）。
Spring MVC 支持 RESTful 风格请求，具体讲的就是使⽤ @PathVariable 注解获取 RESTful 风格的请求
URL中的路径变量。

第 5 节 Ajax Json交互

交互：两个方向
1）前端到后台：前端ajax发送json格式字符串，后台直接接收为pojo参数，使用注解@RequstBody
2）后台到前端：后台直接返回pojo对象，前端直接接收为json对象或者字符串，使用注解@ResponseBody

5.2 @ResponseBody注解  
@responseBody注解的作用是将controller的⽅法返回的对象通过适当的转换器转换为指定的格式之
后，写到到response对象的body区，通常⽤来返回JSON数据或者是XML数据。 注意：在使用此注解之
后不会再用视图处理器，是直接将数据写入到输入流中，他的效果等同于通过response对象输出指定
格式的数据。



第二部分 Spring MVC 高级技术

过滤器（Filter）：对Request请求起到过滤的作⽤，作⽤在Servlet之前，如果配置为/*可以对所
有的资源访问（servlet、js/css静态资源等）进行过滤处理
监听器（Listener）：实现了javax.servlet.ServletContextListener 接⼝的服务器端组件，它随
Web应用的启动前启动，只初始化一次，然后会一直运行监视，随Web应用的停止销毁
作用1：做⼀些初始化⼯作，web应用中spring容器启动ContextLoaderListener
作用2：监听web中的特定事件，例如HttpSession,ServletRequest的创建和销毁；变量的创建、
销毁和修改等。可以在某些动作前后增加处理，实现监控，例如统计在线⼈数，利用
HttpSessionLisener等。
拦截器（Interceptor）：是SpringMVC、Struts等表现层框架自己的，不会拦截
jsp/html/css/image的访问等，只会拦截访问的控制器⽅法（Handler）。
从配置的⻆度也能够总结发现：serlvet、ﬁlter、listener是配置在web.xml中的，⽽interceptor是
配置在表现层框架自己的配置文件中的